<!doctype html>

<!--

Hi there! Thanks for taking a look through my code.

Almost everything you see on this website was written/created
from scratch by me. The only exceptions are a jQuery function
you'll find at the bottom of this file, the fonts (I leave the
design and creation of fonts to those more skilled than me!),
and a jQuery library with contains a few additional easing
functions for animations/transitions.

-->
<html lang="en">
<head>
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Roboto:400,700">
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Montserrat:400,700">
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans:300">
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Lato:100">

<link rel="stylesheet" type="text/css" href="css/default_test.css">
<link rel='stylesheet' media='screen and (max-width: 1100px)' href='css/mobile_test.css'>
<script type="text/javascript" src="jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="jquery.easing.1.3.js"></script>

<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link rel="icon" href="favicon.ico" type="image/x-icon">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Kevin Beaulieu</title>
</head>

<body>
	
	<section id="section-0">
		<canvas id="canvas-0"></canvas>
		<h1 id="title">KEVIN BEAULIEU</h1>
		<div id="scroll-down-indicator-back">
			<div id="scroll-down-indicator-front"></div>
		</div>
		
		<div id="bubbles-tip" class="desktop">I wonder what happens<br />if I click and drag my mouse?...</div>
	</section>
	
	<section id="section-1" class="light">
		<span id="apps-bubble" class="category-bubble"><span>apps</span></span>
		<span id="work-bubble" class="category-bubble"><span>work</span></span>
		<span id="graphics-bubble" class="category-bubble"><span>graphics</span></span>
		<span id="animate-bubble" class="category-bubble"><span>animate</span></span>
		
		<span id="apps" class="category">This is the apps category.</span>
		<span id="work" class="category">This is the work category.</span>
		<span id="graphics" class="category">This is the graphics category.</span>
		<span id="animate" class="category">This is the animate category.</span>
	</section>
	
	<footer>
			<span class="quote">"If at first the idea is not absurd, then there is no hope for it."</span><span class="quote-person"> -Albert Einstein</span>
	</footer>
	
	<script type="text/javascript">
		/*
		 * On page load
		 */
		var is_mobile = false;
		var more_section_indices = new Array();
		var more_section_heights = new Array();
		var canvas = document.getElementById("canvas-0");
		var context = canvas.getContext('2d');
		var t;
		var bubbles = new Array();
		var bubble_density = 0.0125;
		var start_bubbles = 0;
		var bubbles_to_header_t = -1;
		var apps_start, work_start, graphics_start, animate_start, bubbles_start;
		var bubbles_to_header_duration = 10;
		var apps_end = new Object(), work_end = new Object(), graphics_end = new Object(), animate_end = new Object(), bubbles_end = new Object();
		apps_end.left = 37;
		work_end.left = 44;
		graphics_end.left = 51;
		animate_end.left = 58;
		bubbles_end.size = 5;
		bubbles_end.font_size = 1;

		$(window).load(function(e) {
			/*
			 * Check whether mobile device
			 */
		 	is_mobile = $(".desktop").css("visibility") === "hidden";
			
			/*
			 * Fix logo position
			 */
			var header_height = getHeaderHeight();
			var wh_ratio = 1.42;
			var logo_width = header_height*wh_ratio;
			var logo_jquery = $("header li.logo");
			logo_jquery.css("width", logo_width+"px");
			logo_jquery.css("height", "calc("+header_height+"px - 2em");
			logo_jquery.css("background-size", (logo_width * 0.8) + "px " + (header_height * 0.8) + "px");
			logo_jquery.css("background-position", (logo_width * 0.1) + "px " + (header_height * 0.1) + "px");
			
			/*
			 * Hide more information sections on page load
			 */
			$(".more-section").each(function(index) {
				more_section_indices.push($(this).attr("id").substring(13));
				more_section_heights.push($(this).height());
			});
			$(".more-section").css("height", "0");
			
			/*
			 * Move animatable elements to initial position
			 */
			$("section h2, section p").each(function(i, el) {
				$(el).addClass("animatable");
			});	
						
			/*
			 * Set up canvases
			 */
			canvas.width = document.documentElement.clientWidth;
			canvas.height = window.innerHeight;
			
			/*
			 * Randomly generate bubbles
			 */
			start_bubbles = bubble_density * canvas.width;
			for(var i = 0; i < start_bubbles; i++) {
				generateBubble(false);

			}
			
			/*
			 * Animate scroll down indicator
			 */
			$("#scroll-down-indicator-back").addClass("scroll-down-indicator-animate-in");
			$("#scroll-down-indicator-back").css("opacity", 1);
			setTimeout(function() {
				$("#scroll-down-indicator-back").removeClass("scroll-down-indicator-animate-in");
			}, 800);
			$("#scroll-down-indicator-back").mouseenter(function() {
				$("#scroll-down-indicator-back").addClass("scroll-down-indicator-hover");
				setTimeout(function() {
					$("#scroll-down-indicator-back").removeClass("scroll-down-indicator-hover");
				}, 400);
			});
			$("#scroll-down-indicator-back").on("touchstart", function() {
				$("#scroll-down-indicator-back").addClass("scroll-down-indicator-hover");
				setTimeout(function() {
					$("#scroll-down-indicator-back").removeClass("scroll-down-indicator-hover");
				}, 400);
			});
			
			/*
			 * Layout category list bubbles
			 */
			var numRows = 1;
			while(layoutCategories(numRows)) numRows++;
		});
		
		$(window).resize(function() {
			canvas.width = document.documentElement.clientWidth;
			canvas.height = window.innerHeight;
			
			var numRows = 1;
			while(layoutCategories(numRows)) numRows++;
		});
		
		/*
		 * Layout category bubbles in the specified number of rows
		 */
		function layoutCategories(numRows) {
			//$(".category-bubble").height($(".category-bubble").width());
			$("#section-1").height(Math.max($(".category-bubble").height(), window.innerHeight - 100 - getHeaderHeight()));
			
			$(".category-bubble").mouseenter(function() {
				onCategoryHover($(this));
			});
			$(".category-bubble").on("touchstart", function() {
				onCategoryHover($(this));
			});
			$(".category-bubble").on("click", function() {
				// Animate fixed element bubbles to header
				var bubbleWidth = Math.min(100, (window.innerWidth * 0.8) / 4);
				$(".category-bubble").css("float", "none");
				$("#apps-bubble").animate({"left": "37%", "width": "50px", "height": "50px", "font-size": "1em"}, 800, 'easeOutBounce');
				$("#work-bubble").animate({"left": "44%", "width": "50px", "height": "50px", "font-size": "1em"}, 800, 'easeOutBounce');
				$("#graphics-bubble").animate({"left": "51%", "width": "50px", "height": "50px", "font-size": "1em"}, 800, 'easeOutBounce');
				$("#animate-bubble").animate({"left": "58%", "width": "50px", "height": "50px", "font-size": "1em"}, 800, 'easeOutBounce');
				
				var category = $(this).html();
				category = category.substring(category.indexOf(">")+1, category.indexOf("</"));
				$("#"+category).css({
					"-webkit-transition": "all 1s ease-in-out",
					"-moz-transition": "all 1s ease-in-out",
					"-ms-transition": "all 1s ease-in-out",
					"-o-transition": "all 1s ease-in-out",
					"transition": "all 1s ease-in-out",
					"top": bubbleWidth+100+"px",
					"opacity": 1,
					"height": "500px",
					"-webkit-transform": "translateY(0px)",
					"-moz-transform": "translateY(0px)",
					"-ms-transform": "translateY(0px)",
					"-o-transform": "translateY(0px)",
					"transform": "translateY(0px)"
				});
			});
			
			return false;
		}
		
		/*
		 * Trigger category bubble hover effect
		 */
		function onCategoryHover(categoryBubble) {
			categoryBubble.addClass("category-table-bubble-hover");
			setTimeout(function() {
				categoryBubble.removeClass("category-table-bubble-hover");
			}, 600);
		}
		
		/*
		 * Return height of header, or 0 if header is hidden
		 */
		function getHeaderHeight() {
			return ($("header").css("visibility") === "hidden") ? 0 : $("header").height();
		}
		
		/*
		 * On scroll (now called every frame from animate)
		 */
		//$(window).scroll(function(e) {
		function update_scroll() {
			/*
			 * Update header's active section on scroll
			 */
		    var y_pos = $(this).scrollTop() + getHeaderHeight();
		    var section_n = 0;
		    var has_set_section = false;
		    $("section").each(function(index) {	    		
	    		if(!has_set_section) {
		    		var section_y = Math.floor($(this).offset().top + $(this).outerHeight());
		    				    		
		    		if(y_pos < section_y) {
		    			has_set_section = true;
		    		}
		    		else {
		    			section_n++;
		    		}
		    	}
		    });
			
		    $(".section-link-active").removeClass("section-link-active");
		    $("#section-link-"+section_n).addClass("section-link-active");
		    
		    
		    /*
		     * Animate in newly visible elements
		     */
			$(".animatable").each(function(i, el) {
				if ($(el).visible(true) && !$(el).hasClass("animate-in")) {
					$(el).addClass("animate-in");
					$(el).removeClass("animatable");
				}
			});
			
			/*
			 * Update introduction's background color
			 */
			var alpha = 1.0 - (y_pos - getHeaderHeight()) / $("#section-0").height();
			$("#section-0").css("background-color", "rgba(28, 190, 232, "+alpha+")");
			$("#section-0 *").css("opacity", alpha);
		}
		
		/*
		 * Scroll to section on header's section button click
		 * or introduction's scroll down indicator
		 */
		$(".section-link").on("click", function(event) {
			event.preventDefault();
			var section_id = "#section-"+$(this).attr("id").substring(13);
			$("html, body").animate({
				scrollTop:$(section_id).offset().top - getHeaderHeight() + 1
			}, 1000, "swing");
		});
		$("#scroll-down-indicator-back, #scroll-down-indicator-front").on("click", function(event) {
			console.log("hi");
			event.preventDefault();
			$("html, body").animate({
				scrollTop:$("#section-1").offset().top - getHeaderHeight() + 1
			}, 1000, "swing");
		});
		
		/*
		 * Show more information on section 'see more' button click
		 */
		$(".btn-inner").on("click", function(event) {
			event.preventDefault();
			var section_n = $(this).parent().attr("id").substring(10);
			var more_section_id = "#more-section-"+section_n;
			
			if($(more_section_id).css("height") === "0px") {
				var ind = -1;
				for(var i = 0; i < more_section_indices.length && ind == -1; i++) {
					if(more_section_indices[i] == section_n) ind = i;
				}
				if(ind != -1) $(more_section_id).css("height", more_section_heights[ind]);
			}
			else {
				$(more_section_id).css("height", "0px");
			}
		});
		
		
		var is_mouse_down = false;
		var mouse_position = new Object();
		$("*").mousedown(function(event) {
			mouse_position.x = event.pageX;
			mouse_position.y = event.pageY;
			is_mouse_down = true;
		})
		.mouseup(function(event) {
			is_mouse_down = false;
		})
		.mousemove(function(event) {
			mouse_position.x = event.pageX;
			mouse_position.y = event.pageY;
		});
		
		function Bubble(x, y, speed, angle, accel_speed, accel_angle, radius) {
			this.x = x;
			this.y = y;
			this.speed = speed;
			this.angle = angle;
			this.accel_speed = accel_speed;
			this.accel_angle = accel_angle;
			this.radius = radius;
		}

		function generateBubble(at_top, position) {
			if(position == null) {
				radius = Math.random()*50 + 20;
				position = new Object();
				position.x = Math.random() * canvas.width;
				if(at_top) position.y = getHeaderHeight() - radius - 5;
				else position.y = Math.random() * canvas.height;
			}
			else {
				radius = Math.random()*20 + 10;
			}
			var speed = Math.random()*0.5 + 0.25;
			var angle = Math.random()*Math.PI/2 + Math.PI*5/4;
			var accel_speed = 0;
			var accel_angle = 0;
			bubbles.push(new Bubble(position.x, position.y, speed, angle, accel_speed, accel_angle, radius));
		}
		
		window.requestAnimFrame = (function(callback) {
			return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
			function(callback) {
				window.setTimeout(callback, 1000 / 60);
			};
		})();
		
		function animate() {
			//update scroll
			update_scroll();
			
			// update
			var now = new Date().getTime();
	        var dt = now - (t || now);		 
		    t = now;
		    
			var new_bubble_rate = 0.0125;
		    
			if(Math.random()<new_bubble_rate) generateBubble(true);
			if(!is_mobile && is_mouse_down) {
				generateBubble(false, mouse_position);
			}

	
			// clear
			context.save();
			context.setTransform(1, 0, 0, 1, 0, 0);
			context.clearRect(0, 0, canvas.width, canvas.height);
			context.restore();
			
			if(!is_mobile && mouse_position != null) {
				context.beginPath();
				context.arc(mouse_position.x, mouse_position.y, 25, 0, 2*Math.PI);
				context.closePath();
				context.strokeStyle = "rgba(128, 218, 255, 0.7)";
				context.stroke();
			}
			
			context.strokeStyle = "rgba(128, 218, 255, 0.9)";
			for(var i = 0; i < bubbles.length; i++) {
				var bubble = bubbles[i];
				context.beginPath();
				context.arc(bubble.x, bubble.y, bubble.radius, 0, 2*Math.PI);
				context.closePath();
				context.stroke();
				
				bubble.x += bubble.speed * Math.cos(bubble.angle);
				bubble.y -= bubble.speed * Math.sin(bubble.angle);
				
				bubble.speed += bubble.accel_speed;
				bubble.angle += bubble.accel_angle;
				
				if(bubble.x < -bubble.radius-6 || bubble.x > canvas.width+bubble.radius+6 ||
					bubble.y < -bubble.radius-6 || bubble.y > canvas.height+bubble.radius+6) {
					bubbles.splice(i, 1);
					i--;
				}
			}
			
			
			// Update bubbles to header animation
			if(bubbles_to_header_t >= 0) {
				var apps = $("#apps-bubble");
				var work = $("#work-bubble");
				var graphics = $("#graphics-bubble");
				var animates = $("#animate-bubble");
				
				if(bubbles_to_header_t == 0) {
					apps_start = new Object();
					apps_start.left = apps.offset().left / window.innerWidth * 100;
					apps_start.top = apps.offset().top;
					bubbles_start = new Object();
					bubbles_start.size = apps.width() / window.innerWidth * 100;
					bubbles_start.font_size = 2;
					
					work_start = new Object();
					work_start.left = work.offset().left / window.innerWidth * 100;
					work_start.top = work.offset().top;
					
					graphics_start = new Object();
					graphics_start.left = graphics.offset().left / window.innerWidth * 100;
					graphics_start.top = graphics.offset().top;
					
					animate_start = new Object();
					animate_start.left = animates.offset().left / window.innerWidth * 100;
					animate_start.top = animates.offset().top;
				}
				else {
					var t_percent = bubbles_to_header_t / bubbles_to_header_duration;
					var size = bubbles_start.size * (1 - t_percent) + bubbles_end.size * t_percent + "vw";
					apps.css({"left": (apps_start.left * (1 - t_percent) + apps_end.left * t_percent) + "vw",
								"width": size,
								"height": size});
					work.css({"left": (work_start.left * (1 - t_percent) + work_end.left * t_percent) + "vw",
								"width": size,
								"height": size});
					graphics.css({"left": (graphics_start.left * (1 - t_percent) + graphics_end.left * t_percent) + "vw",
								"width": size,
								"height": size});
					animates.css({"left": (animate_start.left * (1 - t_percent) + animate_end.left * t_percent) + "vw",
								"width": size,
								"height": size});
				}
				
				bubbles_to_header_t++;
				
				if(bubbles_to_header_t > bubbles_to_header_duration) {
					bubbles_to_header_t = -1;
					console.log("result: "+apps.css("left"));
				}
			}
	
			// request new frame
			requestAnimFrame(animate);
		}
		animate();
		
		
		/*
		 * jQuery function to check if element is visible
		 */
		(function($) {
			  /**
			   * Copyright 2012, Digital Fusion
			   * Licensed under the MIT license.
			   * http://teamdf.com/jquery-plugins/license/
			   *
			   * @author Sam Sehnert
			   * @desc A small plugin that checks whether elements are within
			   *     the user visible viewport of a web browser.
			   *     only accounts for vertical position, not horizontal.
			   */
			
			  $.fn.visible = function(partial) {
			    
			      var $t            = $(this),
			          $w            = $(window),
			          viewTop       = $w.scrollTop(),
			          viewBottom    = viewTop + $w.height(),
			          _top          = $t.offset().top,
			          _bottom       = _top + $t.height(),
			          compareTop    = partial === true ? _bottom : _top,
			          compareBottom = partial === true ? _top : _bottom;
			    
			    return ((compareBottom <= viewBottom) && (compareTop >= viewTop));
			
			  };
			    
			})(jQuery);
	</script>

</body>

</html>
